# Проектная работа "Веб-ларёк"

## Используемый стек

- **HTML** — разметка страниц  
- **SCSS** — стилизация интерфейса  
- **TypeScript** — типизация и логика приложения  
- **Webpack** — сборка проекта

---

# Структура проекта

- src/ — исходные файлы проекта
- src/components/ — папка с компонентами
- src/components/base/ — папка с базовым кодом

# Важные файлы

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

---

## Инструкция по сборке и запуску

1. Установите зависимости:
   ```
   npm install
   ```
   или
   ```
   yarn
   ```
2. Запустите проект в режиме разработки:
   ```
   npm run start
   ```
   или
   ```
   yarn start
   ```
3. Для сборки production-версии:
   ```
   npm run build
   ```
   или
   ```
   yarn build
   ```

---

## Архитектурный подход

**Парадигма:** MVP (Model-View-Presenter) с событийно-ориентированным взаимодействием через EventEmitter.

Архитектура разделена на три слоя:
- **Модель (Model)** — хранение и обработка данных, бизнес-логика
- **Представление (View)** — отображение интерфейса, обработка пользовательских событий
- **Презентер (Presenter)** — координация между Model и View, реализуется в основном скрипте приложения

Взаимодействие между слоями происходит через событийный брокер (EventEmitter).

---

## Принципы архитектуры

- **Изолированность:** Каждый слой и класс отвечает только за свою зону ответственности.
- **Единственная ответственность:** Каждый компонент решает одну задачу.
- **Масштабируемость:** Добавление новых функций возможно без изменения базового кода.

---

## Базовые классы

### EventEmitter
Класс EventEmitter обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события. Используется для связи между слоями Model, View и Presenter.

### Api
Класс Api реализует работу с сервером: отправку HTTP-запросов, обработку ответов и ошибок. Позволяет получать список товаров и отправлять заказы. Используется в модели для получения и отправки данных.

### View
Класс View — базовый для всех представлений. Его функции: создание и обновление DOM-элементов, подписка на пользовательские события, рендеринг данных. Все визуальные компоненты наследуются от этого класса.

### Modal
Класс Modal реализует базовую функциональность модальных окон: открытие, закрытие, обработка кликов вне окна и на крестик. Позволяет отображать любой контент внутри себя.

### Form
Класс Form реализует базовую работу с формами: валидация полей, сбор данных, отображение ошибок. Используется для всех форм в приложении (оформление заказа и т.д.).

### Button
Класс Button реализует универсальную кнопку. Его функции: обработка кликов, смена состояния (активна/неактивна), настройка внешнего вида.

---

## Основные части архитектуры

### Слой МОДЕЛЬ

#### ProductList
- Управляет коллекцией товаров.
- Поля: `products: IProduct[]`.
- Методы: `getById(id: string)`, `setProducts(products: IProduct[])`, `filterByCategory(category: string)`

#### Basket
- Управляет корзиной пользователя.
- Поля: `products: IProduct[]`, `totalPrice: TPrice`.
- Методы: `add(product: IProduct)`, `remove(productId: string)`, `clear()`, `getTotal()`

#### UserData
- Хранит данные пользователя для заказа.
- Поля: `deliveryAddress: string`, `email: string`, `phone: string`.
- Методы: сеттеры для каждого поля

#### OrderForm
- Управляет процессом оформления заказа.
- Поля: `payment: TPaymentMethod`, `deliveryAddress: string`, `email: string`, `phone: string`, `totalPrice: TPrice`.
- Методы: `isValidStep1()`, `isValidStep2()`, `submit()`

#### Api
- Выполняет запросы к серверу.
- Поля: `baseUrl: string`.
- Методы: `getProducts()`, `createOrder(order: IOrder)`

---

### Слой ПРЕДСТАВЛЕНИЯ

#### PageView
- Отображает главную страницу, каталог товаров, кнопку корзины.
- Поля: DOM-элементы: контейнер каталога, кнопка корзины, счетчик количества товаров в корзине.

#### ProductCardView
- Отображает карточку товара.
- Поля: DOM-элементы: категория, название, изображение, цена.

#### ProductModalView
- Показывает подробную информацию о товаре.
- Поля: DOM-элементы: изображение, категория, название, описание, кнопки "Купить"/"Удалить из корзины", цена.

#### BasketModalView
- Показывает содержимое корзины.
- Поля: DOM-элементы: список товаров, кнопка "Оформить", общая стоимость.

#### BasketItemView
- Отображает товар в корзине.
- Поля: DOM-элементы: индекс, название, цена, кнопка "Удалить".

#### OrderDeliveryView
- Первый шаг оформления заказа (доставка и оплата).
- Поля: DOM-элементы: выбор способа оплаты, форма адреса, кнопка "Далее".

#### OrderContactsView
- Второй шаг оформления заказа (контакты).
- Поля: DOM-элементы: поля email, телефон, кнопка "Оплатить".

#### OrderSuccessView
- Страница успешного заказа.
- Поля: DOM-элементы: сообщение, итоговая стоимость, кнопка "За новыми покупками".

#### Modal
- Базовый компонент для модальных окон.
- Поля: контейнер модального окна, кнопка закрытия.
- Методы: открыть, закрыть, обработка кликов вне окна.

#### Button
- Универсальная кнопка.
- Поля: DOM-элемент кнопки.
- Методы: установка состояния (активна/неактивна), обработка кликов.

#### Form
- Базовый компонент формы.
- Поля: DOM-форма, поля ввода, сообщения об ошибках.
- Методы: валидация, сбор данных, отображение ошибок.

---

### Слой ПРЕЗЕНТЕРА

Код презентера не будет выделен в отдельный класс, а будет размещен в основном скрипте приложения (index.ts).
- Отвечает за координацию между Model и View.
- Подписывается на события от View, вызывает методы Model, обновляет View.
- Реализует бизнес-логику и обработку событий.

---

### Брокер событий (EventEmitter)

- Обеспечивает связь между компонентами через события.
- Функции: установка и снятие слушателей, вызов слушателей при возникновении события.

---

## Взаимодействие компонентов (пример сценария)

1. View реагирует на действие пользователя (например, клик "Купить") и генерирует событие (`PRODUCT_ADDED_TO_BASKET`).
2. Презентер (index.ts) обрабатывает событие, вызывает метод модели корзины `basket.add(product)`.
3. Модель корзины изменяет данные и генерирует событие (`BASKET_UPDATED`).
4. Презентер обрабатывает событие `BASKET_UPDATED`, вызывает рендер View с новыми данными.
5. View перерисовывается, отображая обновленную корзину.

---

## Типы данных и интерфейсы

```typescript


```

### Перечисление событий

```typescript


```

---